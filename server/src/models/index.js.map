{"version":3,"sources":["../../../dist/models/index.js"],"names":["Object","defineProperty","exports","value","_fs","require","_fs2","_interopRequireDefault","_path","_path2","_sequelize","_sequelize2","_config","_config2","obj","__esModule","default","basename","__filename","env","process","NODE_ENV","config","db","sequelize","environment","DB_NAME","DB_USER","DB_PASS","host","DB_HOST","port","DB_PORT","dialect","dialectOption","ssl","native","logging","database","username","password","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","import","join","name","keys","modelName","associate","sync","Sequelize"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,SAAO;AADoC,CAA7C;;AAIA,IAAIC,MAAMC,QAAQ,IAAR,CAAV;;AAEA,IAAIC,OAAOC,uBAAuBH,GAAvB,CAAX;;AAEA,IAAII,QAAQH,QAAQ,MAAR,CAAZ;;AAEA,IAAII,SAASF,uBAAuBC,KAAvB,CAAb;;AAEA,IAAIE,aAAaL,QAAQ,WAAR,CAAjB;;AAEA,IAAIM,cAAcJ,uBAAuBG,UAAvB,CAAlB;;AAEA,IAAIE,UAAUP,QAAQ,kBAAR,CAAd;;AAEA,IAAIQ,WAAWN,uBAAuBK,OAAvB,CAAf;;AAEA,SAASL,sBAAT,CAAgCO,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F,IAAIG,WAAWR,OAAOO,OAAP,CAAeC,QAAf,CAAwBC,UAAxB,CAAf;AACA,IAAIC,MAAMC,QAAQD,GAAR,CAAYE,QAAZ,IAAwB,aAAlC;AACA,IAAIC,SAAST,SAASG,OAAT,CAAiBG,GAAjB,CAAb;AACA,IAAII,KAAK,EAAT;AACA,IAAIC,YAAY,KAAK,CAArB;AACA,IAAIF,OAAOG,WAAP,KAAuB,YAA3B,EAAyC;AACvC;AACAD,cAAY,IAAIb,YAAYK,OAAhB,CAAwBI,QAAQD,GAAR,CAAYO,OAApC,EAA6CN,QAAQD,GAAR,CAAYQ,OAAzD,EAAkEP,QAAQD,GAAR,CAAYS,OAA9E,EAAuF;AACjGC,UAAMT,QAAQD,GAAR,CAAYW,OAD+E;AAEjGC,UAAMX,QAAQD,GAAR,CAAYa,OAF+E;AAGjGC,aAAS,UAHwF;AAIjGC,mBAAe;AACbC,WAAK,IADQ;AAEbC,cAAQ;AAFK,KAJkF;AAQjGC,aAAS;AARwF,GAAvF,CAAZ;AAUD,CAZD,MAYO;AACLb,cAAY,IAAIb,YAAYK,OAAhB,CAAwBM,OAAOgB,QAA/B,EAAyChB,OAAOiB,QAAhD,EAA0DjB,OAAOkB,QAAjE,EAA2ElB,MAA3E,CAAZ;AACD;;AAEDhB,KAAKU,OAAL,CAAayB,WAAb,CAAyBC,SAAzB,EAAoCC,MAApC,CAA2C,UAAUC,IAAV,EAAgB;AACzD,SAAOA,KAAKC,OAAL,CAAa,GAAb,MAAsB,CAAtB,IAA2BD,SAAS3B,QAApC,IAAgD2B,KAAKE,KAAL,CAAW,CAAC,CAAZ,MAAmB,KAA1E;AACD,CAFD,EAEGC,OAFH,CAEW,UAAUH,IAAV,EAAgB;AACzB,MAAII,QAAQxB,UAAUyB,MAAV,CAAiBxC,OAAOO,OAAP,CAAekC,IAAf,CAAoBR,SAApB,EAA+BE,IAA/B,CAAjB,CAAZ;AACArB,KAAGyB,MAAMG,IAAT,IAAiBH,KAAjB;AACD,CALD;;AAOAhD,OAAOoD,IAAP,CAAY7B,EAAZ,EAAgBwB,OAAhB,CAAwB,UAAUM,SAAV,EAAqB;AAC3C,MAAI9B,GAAG8B,SAAH,EAAcC,SAAlB,EAA6B;AAC3B/B,OAAG8B,SAAH,EAAcC,SAAd,CAAwB/B,EAAxB;AACD;AACF,CAJD;;AAMAC,UAAU+B,IAAV;;AAEAhC,GAAGC,SAAH,GAAeA,SAAf;AACAD,GAAGiC,SAAH,GAAe7C,YAAYK,OAA3B;;AAEAd,QAAQc,OAAR,GAAkBO,EAAlB","file":"index.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _sequelize = require('sequelize');\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nvar _config = require('../config/config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar basename = _path2.default.basename(__filename);\nvar env = process.env.NODE_ENV || 'development';\nvar config = _config2.default[env];\nvar db = {};\nvar sequelize = void 0;\nif (config.environment === 'production') {\n  // sequelize = new Sequelize(process.env[config.use_env_variable]);\n  sequelize = new _sequelize2.default(process.env.DB_NAME, process.env.DB_USER, process.env.DB_PASS, {\n    host: process.env.DB_HOST,\n    port: process.env.DB_PORT,\n    dialect: 'postgres',\n    dialectOption: {\n      ssl: true,\n      native: true\n    },\n    logging: true\n  });\n} else {\n  sequelize = new _sequelize2.default(config.database, config.username, config.password, config);\n}\n\n_fs2.default.readdirSync(__dirname).filter(function (file) {\n  return file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js';\n}).forEach(function (file) {\n  var model = sequelize.import(_path2.default.join(__dirname, file));\n  db[model.name] = model;\n});\n\nObject.keys(db).forEach(function (modelName) {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\nsequelize.sync();\n\ndb.sequelize = sequelize;\ndb.Sequelize = _sequelize2.default;\n\nexports.default = db;"]}